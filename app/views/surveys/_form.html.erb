<%= form_with(model: @survey, url: surveys_create_path) do |f| %>
    <b>Survey Name: </b><%= f.text_field :name %>
    <br />
    <br />
    <%= f.fields_for :questions do |q| %>
        <% render 'surveys/question_fields', q: q %>
    <% end %>
    <%= link_to_add_fields("Add Question", f, :questions) %>
    <br />
    <br />
    <b>Remind employees every:</b><br />
    <%= f.radio_button :day_of_week, 'monday', :checked => true %>Monday<br />
    <%= f.radio_button :day_of_week, 'tuesday' %>Tuesday<br />
    <%= f.radio_button :day_of_week, 'wednesday' %>Wednesday<br />
    <%= f.radio_button :day_of_week, 'thursday' %>Thursday<br />
    <%= f.radio_button :day_of_week, 'friday' %>Friday<br />
    <%= f.radio_button :day_of_week, 'saturday' %>Saturday<br />
    <%= f.radio_button :day_of_week, 'sunday' %>Sunday<br />
    <br />
    <%= f.time_select :time_of_day, {ampm: true, minute_step: 5, default: Time.now} %>
    <br />
    <br />
    <b>Is this survey Identified or Anonymous?</b><br />
    <%= f.select :isAnonymous, options_for_select([['Identifiable', 'identifiable'], ['Anonymous', 'anonymous']], 'identifiable') %>
    <br />
    <br />
    <%= f.submit %>
<% end %>

<script>
    $('form').on('click', '.remove-fields', function(event) {
        $(this).prev('input[type=hidden]').val('1');
        $(this).closest('fieldset').hide();
        return event.preventDefault();
    });

    $('form').on('click', '.add_fields', function(event) {
        var regexp, time;
        time = new Date().getTime();
        regexp = new RegExp($(this).data('id'), 'g');
        $(this).before($(this).data('fields').replace(regexp, time));
        return event.preventDefault();
    });
</script> 